# 지연 평가

자바스크립트에서 지연 평가라니 ... 무슨 말일까?
지연 평가는 말 그래도 평가를 지연하는 것이다. 그리고 평가를 지연시키는 방법은 함수를 이용한다.

연산자들과 로직을 담은 순수 함수를 통해 평가하는 일을 늦춘다. 함수는 평가의 단위이며, 조급히 평가할 수도 있고 미룰 수도 있다. 함수를 언제 평가 했느냐에 따라 엄격한 평가(조급한 계산법)가 되거나 지연 평가(느긋한 계산법)가 된다.

Lodash의 지연 평가는 평가 조건이 암시적이다.
따라서 커스텀이 어렵다.
Partial.js에서는 이러한 지연평가를 L을 사용하는 것으로 구현했다.
지연 평가하고 싶은 함수의 네임스페이스를 `_`에서 L로 바꿔주면 된다.
개발자는 L을 통해 지연 평가할 영역을 명시적으로 선택할 수 있다.

지연 평가의 세 가지 기준은 다음과 같다.
1. 데이터가 많을 때
2. 앞쪽 함수가 무거운 함수일 때
3. 뒤쪽으로 갈수록 필요한 재료가 적을 때(완성하는 데 필요한 재료가 적을 때)

# 컬렉션 중심 프로그래밍

컬렉션을 다루는 것은 함수형 프로그래밍과 잘 어울리고 더욱 빛을 발한다.
컬렉션 중심 프로그래밍의 목표는 컬렉션을 다루는 좋은 로직의 함수 세트들을 만들어서 재사용성을 극대화시키는 데 있다.

좋은 로직의 개별 함수는 많으면 많을수록 좋다. 함수를 조합하는 식으로 프로그래밍을 하면 그 함수의 내부가 아무리 복잡하더라도 코드는 간결해지고 표현력을 풍부하게 만들 수 있다.

많은 데이터형을 지원하고 화려하게 동작하는 만능 함수 10개를 사용하는 것보다, 적은 데이터형을 지원하며 작은 기능만을 수행하는 함수를 100개 운용하는 것이 좋다. 이것은 분기를 줄이며 성능을 좋게 하고, 함수 이름으로 로직을 외우게 한다. 함수 이름으로 로직을 외워 두면 복잡한 코드를 읽지 않고도 무슨 일을 하는지 떠올릴 수 있다.

- 4가지 유형별 대표 함수와 유형
	1. map - 다 돌면서 내부 재료와 연관된 각각의 새로운 값 만들기, 이 유형을 줄여서 '수집하기'라고 하자.
	2. filter - 다 돌면서 거르기, 이 유형을 줄여서 '거르기'라고 하자.
	3. reduce - 다 돌면서 좁히기, 이 유형을 줄여서 '접기'라고 하자.
	4. find - 찾아나가다가 원하는 결과를 완성하면 나가기, 이 유형을 줄여서 '찾아내기'라고 하자.

- 4가지 유형별 고차 함수들
	1. 수집하기 - map, pluck, values, keys, pairs 등
	2. 거르기 - filter, reject, difference, compact 등
	3. 접기 - reduce, group_by, index_by, count_by, max, min 등
	4. 찾아내기 - find, some, every, take, indexOf, findIndex 등



동일 유형의 함수들은 모두 같은 목표를 가지고 있다. 여기서 말하는 목표는 단순히 리턴값이 아니고, 특정 데이터형도 아니다. 각 함수의 실제적인 용도나 리턴 값은 다를 수 있지만, 모두 동일한 로직을 갖는다. 

함수형 프로그래밍에서 함수는 로직이다. 함수형 프로그래밍에서 함수를 선택하는 것은 로직을 선택하는 것이며, 함수를 조합하는 것은 로직을 완성해 나가는 것이다.


